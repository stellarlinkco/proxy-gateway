# 环境变量示例配置
# 复制此文件为 .env 并修改配置

# ============ 服务器配置 ============
PORT=3000

# 运行环境: development | production
# 影响:
#   - production: Gin ReleaseMode(高性能)、关闭/admin/dev/info、严格CORS
#   - development: Gin DebugMode(详细日志)、开启/admin/dev/info、宽松CORS
# 生产环境务必设置为 production！
ENV=production

# ============ Web UI 配置 ============
# 是否启用 Web 管理界面
ENABLE_WEB_UI=true

# ============ 访问控制 ============
# 代理访问密钥（必须修改！）
PROXY_ACCESS_KEY=your-secure-access-key-here

# ============ 日志配置 ============
# 日志级别: error | warn | info | debug
LOG_LEVEL=info

# 是否启用请求/响应日志
# 注意：默认值为 true，注释掉此项等于启用日志
# 要禁用日志必须显式设置为 false，不能通过注释来禁用
ENABLE_REQUEST_LOGS=false
ENABLE_RESPONSE_LOGS=false

# 静默前端轮询端点日志（调试时避免刷屏）
QUIET_POLLING_LOGS=true

# 原始日志输出（不缩进、不截断、不重排序，直接输出完整请求/响应内容）
RAW_LOG_OUTPUT=false

# SSE 调试级别: off | summary | full
# full: 记录每个 SSE 事件的类型、长度、content_block 详情
# summary: 仅在流结束时记录事件统计摘要
# off: 关闭 SSE 调试日志（默认）
SSE_DEBUG_LEVEL=off

# ============ 性能配置 ============
# 请求超时时间（毫秒）
REQUEST_TIMEOUT=300000

# 请求体最大大小（MB），默认 50
MAX_REQUEST_BODY_SIZE_MB=50

# 等待上游响应头超时时间（秒），默认 60，范围 30-120
# 如果遇到 "http2: timeout awaiting response headers" 错误，可以适当调高
RESPONSE_HEADER_TIMEOUT=60

# ============ CORS 配置 ============
ENABLE_CORS=false
CORS_ORIGIN=*

# ============ 熔断指标配置 ============
# 滑动窗口大小（最小 3，默认 10）
METRICS_WINDOW_SIZE=10
# 失败率阈值（0-1，默认 0.5 即 50%）
METRICS_FAILURE_THRESHOLD=0.5

# ============ 指标持久化配置 ============
# 是否启用 SQLite 持久化（默认 true）
# 启用后重启服务不会丢失历史指标数据
METRICS_PERSISTENCE_ENABLED=true
# 数据保留天数（3-30，默认 7）
METRICS_RETENTION_DAYS=7
